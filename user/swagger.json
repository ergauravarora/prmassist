{
  "openapi": "3.0.3",
  "info": {
    "version": "1.0.0",
    "title": "PRMAssist Support Microservice REST API",
    "description": "API for the Microservice for User Management , Storing Token and Send Notification"
  },
  "servers": [
    {
      "url": "http://localhost:8080/user"
    },
    {
      "url": "http://localhost:8080/notification"
    }
  ],
  "components": {
    "parameters": {},
    "responses": {
      "InternalError": {
        "description": "Server error",
        "content": {
          "application/problem+json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "BadRequest": {
        "description": "Invalid or missing fields",
        "content": {
          "application/problem+json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Resource does not exist",
        "content": {
          "application/problem+json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error (e.g. Required field missing)",
        "content": {
          "application/problem+json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NoContent": {
        "description": "no content"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "required": ["errors"],
        "properties": {
          "errors": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ErrorDetail" }
          }
        }
      },
      "ErrorDetail": {
        "type": "object",
        "required": [],
        "properties": {
          "value": {
            "type": "string",
            "description": "Value containing error"
          },
          "msg": {
            "type": "string",
            "description": "Error message"
          },
          "param": {
            "type": "string",
            "description": "Parameter containing error"
          },
          "location": {
            "type": "string",
            "description": "Location of error in HTTP request"
          }
        }
      },
      "registerUser": {
        "type": "object",
        "required": [
          "personalDetail",
          "payments",
          "travelCompanions",
          "travelDocuments",
          "bookingHistory",
          "qrCode"
        ],
        "properties": {
          "personalDetail": {
            "type": "object",
            "$ref": "#/components/schemas/personalDetails",
            "description": "Personal Detail"
          },
          "payments": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/payments" },
            "description": "payments Detail"
          },
          "travelCompanions": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/travelCompanions" },
            "description": "travelCompanions Detail"
          },
          "travelDocuments": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/travelDocuments" },
            "description": "travelDocuments Detail"
          },
          "bookingHistory": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/bookingHistory" },
            "description": "bookingHistory Detail"
          },
          "qrCode": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/qrCode" },
            "description": "qrCode Detail"
          }
        }
      },
      "personalDetails": {
        "type": "object",
        "required": ["personalDetails"],
        "properties": {
          "personalDetail":{
            "type": "object",
        "required": ["fullName", "email", "phoneNumber"],
        "properties": {
          "fullName": {
            "type": "string",
            "description": "full name of user",
            "example": "Gaurav arora"
          },
          "email": {
            "type": "string",
            "description": "email of user",
            "example": "agaurav546@gmail.com"
          },
          "phoneNumber": {
            "type": "string",
            "description": "phoneNumber of user",
            "example": "+91 8223886899"
          }
        }
          }
         
        }
      },
      "payments": {
        "type": "object",
        "required": [
          "cardNumber",
          "expiry",
          "ccv",
          "cardHolderName",
          "postalCode"
        ],
        "properties": {
          "cardNumber": {
            "type": "string",
            "description": "card Number of user",
            "example": "0000 0000 0000"
          },
          "expiry": {
            "type": "string",
            "description": "expiry of user",
            "example": "02/2021"
          },
          "ccv": {
            "type": "string",
            "description": "ccv of user",
            "example": "012"
          },
          "cardHolderName": {
            "type": "string",
            "description": "cardHolderName of user",
            "example": "Gaurav arora"
          },
          "postalCode": {
            "type": "string",
            "description": "postalCode of user",
            "example": "456224"
          }
        }
      },
      "travelCompanions": {
        "type": "object",
        "required": [
          "firstName",
          "secondName",
          "nickname",
          "email",
          "phoneNumber"
        ],
        "properties": {
          "firstName": {
            "type": "string",
            "description": "first Name of user",
            "example": "firstName"
          },
          "secondName": {
            "type": "string",
            "description": "second Name of user",
            "example": "secondName"
          },
          "nickname": {
            "type": "string",
            "description": "nickname of user",
            "example": "nickname"
          },
          "email": {
            "type": "string",
            "description": "email of user",
            "example": "email"
          },
          "phoneNumber": {
            "type": "string",
            "description": "phoneNumber of user",
            "example": "phoneNumber"
          }
        }
      },
      "travelDocuments": {
        "type": "object",
        "required": [
          "fullName",
          "passportNumber",
          "expiryDate",
          "countryOfBirth"
        ],
        "properties": {
          "fullName": {
            "type": "string",
            "description": "full Name of user",
            "example": "fullName"
          },
          "passportNumber": {
            "type": "string",
            "description": "passportNumber of user",
            "example": "passportNumber"
          },
          "expiryDate": {
            "type": "string",
            "description": "expiryDate of user",
            "example": "expiryDate"
          },
          "countryOfBirth": {
            "type": "string",
            "description": "countryOfBirth of user",
            "example": "countryOfBirth"
          }
        }
      },
      "bookingHistory": {
        "type": "object",
        "required": [],
        "properties": {}
      },
      "qrCode": {
        "type": "object",
        "required": [
          "qrImage",
          "flightNumber"
        ],
        "properties": {
          "qrImage": {
            "type": "file",
            "description": "Qr Code",
            "consumes":"multipart/form-data"
          },
          "flightNumber": {
            "type": "string",
            "description": "passportNumber of user",
            "example": "passportNumber"
          }
        }
      },
      "storeToken":{
        "type": "object",
        "required": [
          "email",
          "fcmToken"
        ],
        "properties": {
          "email": {
            "type": "string",
            "description": "email",
            "example": "aecdadd27e55f52c714ec4fffe105d0a"
          },
          "fcmToken": {
            "type": "string",
            "description": "fcm Token",
            "example": "dLxr0LOcRTCNkoOIRxD2h9:APA91bFOrmZNjM0xRGOwKikmrhNeU96KOqJ3E50TRQXnekdaebi4eucAxKiGBAnFRj3y_WZyy2l_xmJd6vF-uKTRDyiF6W_5sE99ScjmQxJxX1Z-wusUjuiPgfbURA0EQYO6k3HKUBb-"
          }
        }
      },
      "sendNotification":{
        "type": "object",
        "required": [
          "email",
          "notificationTitle",
          "notificationText"
        ],
        "properties": {
          "email": {
            "type": "string",
            "description": "email",
            "example": "agaurav546@gmail.com"
          },
          "notificationTitle": {
            "type": "string",
            "description": "notification Title",
            "example": "test title"
          },
          "notificationText":{
            "type": "string",
            "description": "notification Text",
            "example": "test text body"
          }
        }
      }
    }
  },
  "paths": {
    "/registerUser": {
      "post": {
        "summary": "Save a User details",
        "operationId": "registerUser",
        "tags": ["Add a new User / Register new User"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/personalDetails"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Saved Tester",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/getUser": {
      "get": {
        "summary": "Get User details",
        "operationId": "getuser",
        "tags": ["Get User Details"],
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {}
          }
        },
        "responses": {
          "201": {
            "description": "Saved Tester",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/updateUser": {
      "put":{
      "summary": "Update User detail",
      "operationId": "putUser",
      "tags": ["Update users details "],
      "parameters": [
        {
          "name": "id",
          "in": "query",
          "type": "string",
          "required": true
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/personalDetails"
            }
          }
        }
      },
      "responses": {
        "201": {
          "description": "Saved Tester",
          "content": {
            "application/json": {}
          }
        },
        "400": {
          "$ref": "#/components/responses/BadRequest"
        },
        "500": {
          "$ref": "#/components/responses/InternalError"
        }
      }
    }
    },
    "/storeToken":{
      "post": {
        "summary": "Save a Firebase cloud messaging token to user",
        "operationId": "storeToken",
        "tags": ["Save a Firebase cloud messaging token to user"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/storeToken"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Saved Tester",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sendNotification":{
      "post": {
        "summary": "send Notifications to users devices",
        "operationId": "sendNotification",
        "tags": ["Send Push Notifications to users Registered devices"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/sendNotification"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Saved Tester",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/AddUserToTravelCompanionList":{
      "post": {
        "summary": "Add User To Companion List",
        "operationId": "posttravelCompanions",
        "tags": ["Add new member to Travel Companions list for user"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/travelCompanions"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Travel Companions added Successfully.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/GetTravelCompanionList":{
      "get": {
        "summary": "Save a Travel Companion details",
        "operationId": "GetTravelCompanionList",
        "tags": ["Get Travel Companion List for User"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "List of Travel Companion.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/DeleteTravelCompanionEntry":{
      "delete": {
        "summary": "Delete Travel Companion Entry for user",
        "operationId": "DeleteTravelCompanionEntry",
        "tags": ["Delete Travel Companion Entry"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          },
          {
            "name": "email",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Travel Companion deleted successfully",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/AddPayementMethod":{
      "post": {
        "summary": "Add Payment Method",
        "operationId": "postAddPayementMethod",
        "tags": ["Add new Payment Method in list for user"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/payments"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment Method added Successfully.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/GetPayementMethods":{
      "get": {
        "summary": "Get Payment details",
        "operationId": "GetPayementMethods",
        "tags": ["Get Payment Method List for User"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "List of Payments.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/DeletePayementMethod":{
      "delete": {
        "summary": "Delete Payment for user",
        "operationId": "DeletePayementMethod",
        "tags": ["Delete Payment record for user"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          },
          {
            "name": "id",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Payment deleted successfully",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/AddTravelDocument":{
      "post": {
        "summary": "Add Travel Document",
        "operationId": "postAddTravelDocument",
        "tags": ["Add new Travel Document in list for user"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/travelDocuments"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Travel Document added Successfully.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/GetTravelDocuments":{
      "get": {
        "summary": "Travel Document details",
        "operationId": "GetTravelDocuments",
        "tags": ["Get Travel Docuemnt List for User"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "List of Travel Companion.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/DeleteTravelDocument":{
      "delete": {
        "summary": "Delete Travel Document Entry for user",
        "operationId": "DeleteTravelDocumentEntry",
        "tags": ["Delete Travel Document Entry"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          },
          {
            "name": "id",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Travel Document deleted successfully",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/AddQrData":{
      "post": {
        "summary": "Add Filght QR Code",
        "operationId": "postAddQrData",
        "tags": ["Add new Filght QR Codet in list"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/qrCode"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Qr Code added Successfully.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/GetQrDatas":{
      "get": {
        "summary": "Get Qr details",
        "operationId": "GetQrDatas",
        "tags": ["Get Qr List for User"],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "QR of Travel Companion.",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/DeleteQrData":{
      "delete": {
        "summary": "Delete QR for user",
        "operationId": "DeleteQrData",
        "tags": ["Delete Qr Data "],
        "parameters": [
          {
            "name": "firebaseid",
            "in": "query",
            "type": "string",
            "required": true
          },
          {
            "name": "id",
            "in": "query",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "QR deleted successfully",
            "content": {
              "application/json": {}
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    }
  }
}
